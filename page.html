<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Sky Map</title>
    <script type="text/javascript" src="lib/d3.min.js"></script>
    <script type="text/javascript" src="lib/d3.geo.projection.min.js"></script>
    <script type="text/javascript" src="js/celestial.js"></script>
    <link rel="stylesheet" href="css/celestial.css">
    <style type="text/css">
        .btnPlanet {
            display: inline-block;
            font: bold 14pt Consolas;
            margin: 0 6px;
            padding: 2px 6px;
            border: 2px solid #000;
            border-radius: 3px;
            background: rgba(204, 204, 255, 0.6)
        }
    </style>
</head>

<body>
    <div align="center">
        <h1>Sky Map</h1>
    </div>
    <div id="follow"></div>
    <div style="overflow:hidden;">
        <div id="celestial-map"></div>
    </div>
    <div id="celestial-form"></div>

    <script type="text/javascript">

        var cfg = Celestial.settings().set({
            geopos: [0, 0],
            location: true,
            form: true,
            formFields: { "location": true, "general": true, "stars": true, "dsos": true, "constellations": true, "lines": true, "other": true },
            advanced: true,
            follow: "center",
            projection: "cylindricalStereographic",
            datapath: "https://ofrohn.github.io/data/",
            planets: { show: true, symbolType: "disk", names: true, namesType: "en" },
            stars: { names: true, limit: 6 },
            dsos: { show: true },
            constellations: { names: true }
        }),
            reqID,
            reqAnimFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                window.webkitRequestAnimationFrame || window.msRequestAnimationFrame ||
                window.oRequestAnimationFrame,
            cncAnimFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame ||
                window.webkitCancelAnimationFrame || window.msCancelAnimationFrame ||
                window.oCancelAnimationFrame,
            dt = new Date();

        Celestial.display(cfg);

        function animate() {
            dt.setDate(dt.getDate() + 1);
            Celestial.date(dt);
            reqID = reqAnimFrame(animate);

            if (follow === "") return;
        }

        d3.select('#celestial-map').on('mousedown', function () { cncAnimFrame(reqID) })
        d3.select('#celestial-map').on('mouseup', function () { reqAnimFrame(animate) })

        reqID = reqAnimFrame(animate);

    </script>

    <footer id="d3-celestial-footer">
        <p><a href="https://github.com/Y0URII/skymap2"><b>Sky Map 2</b></a> released under <a
                href="http://opensource.org/licenses/BSD-3-Clause">BSD license</a>. Copyright 2022</p>
    </footer>
</body>

</html>